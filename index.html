<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Publicidade TV</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: black;
  overflow: hidden;
}

#slide {
  width: 100vw;
  height: 100vh;
  object-fit: contain;
  transition: opacity 0.8s ease-in-out;
}

#relogio {
  position: absolute;
  top: 20px;
  right: 30px;
  color: white;
  font-size: 42px;
  font-family: Arial, sans-serif;
}
</style>
</head>

<body>
<img id="slide">
<div id="relogio"></div>

<script>
let imagens = [];
let index = 0;
let tempo = 8000;

async function carregarLista() {
  const res = await fetch("lista.json?cache=" + Date.now());
  const data = await res.json();

  imagens = data.imagens;
  tempo = data.tempo;
}

function mostrarSlide() {
  if (!imagens.length) return;

  const slide = document.getElementById("slide");
  slide.style.opacity = 0;

  setTimeout(() => {
    slide.src = imagens[index];
    slide.style.opacity = 1;
    index = (index + 1) % imagens.length;
  }, 400);
}

/* RELÃ“GIO */
setInterval(() => {
  const d = new Date();
  document.getElementById("relogio").innerText =
    d.toLocaleTimeString("pt-BR", { hour: "2-digit", minute: "2-digit" });
}, 1000);

async function iniciar() {
  await carregarLista();
  mostrarSlide();
  setInterval(mostrarSlide, tempo);
}

iniciar();
</script>
</body>
</html>
